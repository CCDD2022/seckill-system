# 生产环境容器内使用的配置（Docker）。
# 保留本地开发用的 config.yaml 不动；部署时通过 CONFIG_PATH 指向本文件。
server:
  port: 8080
  mode: release
  read_timeout: 60
  write_timeout: 60

log:
  level: info
  format: json
  output: console
  file_path: ./logs/app.log
  max_size: 100
  max_backups: 3
  max_age: 30

services:
  api_gateway: { host: 0.0.0.0, port: 8080 }
  user_service:   { host: user-service,   port: 50051 }
  product_service: { host: product-service, port: 50052 }
  auth_service:   { host: auth-service,   port: 50053 }
  seckill_service: { host: seckill-service, port: 50054 }
  order_service:  { host: order-service,  port: 50055 }

database:
  mysql:
    host: mysql8019
    port: 3306
    user: root
    password: root1234
    dbname: seckill_shop
    max_open_conns: 600
    max_idle_conns: 300
  redis:
    host: host.docker.internal
    port: 6379
    password: 123456
    db: 0

jwt:
  secret: "my_best_seckill_shop"
  expire_hours: 72

mq:
  host: host.docker.internal
  port: 5672
  user: guest
  password: guest
  channel_pool_size: 32
  consumer_prefetch: 1000
  order_batch_size: 500
  order_batch_interval_ms: 80

rate_limits:
  global:  { rps: 20000, burst: 40000 }
  seckill: { rps: 5000,  burst: 10000 }
  order:   { rps: 8000,  burst: 16000 }


